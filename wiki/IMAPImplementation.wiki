#labels 
#summary IMAP Implimentation Notes

= Introduction =

This page is a place to keep track of implimention ideas and shortcomings of the ErlMail IMAP Server. Most of these have been generated from reading RFC2683 IMAP Implementation Recomendations.

== Mailbox Response Server ==

There seems to be a need to create a Mailbox Response Server based on the gen_server behavior. This server would keep track of the stauts of a mailbox and keep a response queue for each client that may be connected to that mailbox.

When a mailbox is placed into a selected state then then cleint would in effect join the queue for each response that is generated by the system and the respones that are created by commands from that client.

In the senario where to clients are connected and ahve hte same amilbox selected; one of the cleints can use the FETCH commadn to view the message. This will in most cases generate a change in status to for the message and set a flag for SEEN. The cleint that has issues the FETCH command needs to be able to get both the change in status and the information from the FETCH command, while the second cleint needs only to see that the message status has changed and the SEEN flag has been set.

Some consideration needs to be taken into account to minimize message that woudl be contridicotry, although that may be an optimitzation issue for later version. This would needed in the instance that a message is sent a sequence of commands that are duplicated or revert the message to the original state. If a message is set to FLAGGED, then UNFLAGGED and finally FLAGGED again, the first FLAGGED and UNFLAGGED respones are not needed, only the final FLAGGED response should be sent.